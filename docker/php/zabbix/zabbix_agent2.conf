# Пользовательские параметры для PHP
UserParameter=php.version,php -v | head -n 1
UserParameter=php.fpm.status[*],curl -s http://php:9000/status | grep "^$1:" | awk '{print $$2}' || echo "0"
UserParameter=php.opcache.status[*],docker exec socnet-php php -r "\$status = opcache_get_status(false); echo isset(\$status['$1']) ? \$status['$1'] : '0';"
UserParameter=php.process.count,docker top socnet-php | grep php-fpm | wc -l
UserParameter=php.uptime,docker inspect --format='{{.State.StartedAt}}' socnet-php | xargs date +%s -d

# Мониторинг Docker контейнера PHP
UserParameter=docker.php.status[*],docker inspect --format='{{.State.Status}}' socnet-php
UserParameter=docker.php.health[*],docker inspect --format='{{.State.Health.Status}}' socnet-php 2>/dev/null || echo "no health check"
UserParameter=docker.php.cpu.usage,docker stats --no-stream --format "{{.CPUPerc}}" socnet-php | sed 's/%//'
UserParameter=docker.php.memory.usage,docker stats --no-stream --format "{{.MemUsage}}" socnet-php | awk '{print $$1}'
UserParameter=docker.php.memory.percent,docker stats --no-stream --format "{{.MemPerc}}" socnet-php | sed 's/%//'